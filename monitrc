set daemon 120
set init
set httpd port 2812
  allow 2016testAcc:2016testPasscode read-only
set eventqueue basedir /var/monit slots 500
set logfile /var/log/monit.log

check host 127.0.0.1 with address 127.0.0.1
  if failed port 6379 then exec "/usr/local/bin/docker-compose -f /root/docker-lbs.yml up -d"
  if failed port 3306 then exec "/usr/local/bin/docker-compose -f /roor/docker-lbs.yml up -d"
  if failed port 443 then exec "/usr/local/bin/docker-compose -f /root/docker-lbs.yml up -d"

check filesystem rootfs with path /
  if space usage > 80% then alert

check system wherami-system
  if loadavg (1min) > 4 then alert
  if loadavg (5min) > 2 then alert
  if memory usage > 80% then alert
  if cpu usage (user) > 80% then alert
  if cpu usage (system) > 30% then alert
  if cpu usage (wait) > 20% then alert
